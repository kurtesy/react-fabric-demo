{"version":3,"sources":["styles/spinner.module.css","styles/panel.module.css","styles/button.module.css","components/TextBox.js","components/Figures/Rect.js","components/Figures/Circle.js","components/Figures/Line.js","components/Image/ImagePicker.js","config/config.dev.js","services/webSocketService.js","components/ControlPanel/extendedPanel.js","components/Image/Picture.js","components/ControlPanel/panel.js","components/DialogBox.js","components/Utils/Utility.js","DesignCanvas.js","testJsonOutput.js","ReloadJson.js","Home.js","index.js","styles/canvas.module.css","../node_modules/pdfjs-dist/build sync"],"names":["module","exports","fabric","window","defaultProps","top","left","fontSize","width","fontFamily","selectable","TextBox","id","console","log","Textbox","height","fill","stroke","strokeWidth","Rect","radius","Circle","Line","canvas","makeLine","props","coordinates","theCanvas","on","o","line","isDrawing","pointer","getPointer","e","points","x","y","add","set","x2","y2","renderAll","this","FileSelector","state","loading","toBase64","file","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","error","fileToBase64","a","image","handleChange","selectorFiles","setLoading","then","selectImage","catch","err","Button","variant","useButton","component","size","className","buttonStyles","panelBtn","color","type","onChange","target","files","accept","fileType","multiple","style","display","Component","WebSocketService","status","messages","sendMessage","socketOptions","debug","reconnectInterval","maxReconnectAttempts","client","ReconnectingWebSocket","config","onopen","setState","onmessage","message","newMessage","data","JSON","stringify","setClient","BackgroundControlPanel","wsConnect","canvasToJson","event","preventDefault","jsonData","toJSON","navigator","clipboard","writeText","r","alert","clear","backgroundImage","backgroundColor","isLoading","connectToWS","onClick","updateImage","msg","Picture","selectPicture","options","omit","Image","fromURL","img","scale","React","Panel","brushsize","canDraw","brushcolor","backgroundImg","addTextBox","eraserActive","selectedOption","cursor","componentMap","counter","resetBrush","freeDrawingBrush","PencilBrush","isDrawingMode","brushSizeChange","bind","enableSelection","canUseBrush","curColor","document","getElementById","value","brushColorChange","eraser","undoRedo","remove","getObjects","slice","pop","deleteObj","getActiveObject","selectedImg","addBackgroundImg","readPDF","pageNo","pdfjs","disableWorker","GlobalWorkerOptions","workerSrc","version","getDocument","url","corsUrl","pdf","getPage","page","viewport","getViewport","context","getContext","render","canvasContext","promise","toDataURL","addElement","element","canvasElement","setActiveObject","updateCanvas","drawLine","panelStyles","mainMenu","settings","scrollbar","darkerli","title","styles","btn","navText","defaultValue","brush","showFigures","DialogBox","open","position","handleSizeChange","handlePositionChange","handleClose","onClose","aria-labelledby","zIndex","noValidate","flexDirection","margin","FormControl","minWidth","InputLabel","htmlFor","Select","inputProps","name","DialogActions","autoFocus","selectedValue","imageResizePosition","cw","ch","imgWidth","imgHeight","setBackgroundImage","scaleX","scaleY","Object","prototype","DesignCanvas","Canvas","c","mousecursor","setSizeBackgroundImg","newCanvas","onControlChange","imagePath","backgroundImgResize","sendCanvasData","send","innerWidth","innerHeight","setWidth","setHeight","calcOffset","interval","setInterval","canvasStyle","topNav","showMenuIconButton","aria-label","edge","wrapper","ref","spinnerStyles","loaderDiv","loaderPosition","loader","sampleJsonData","_enlivenObjects","objects","callback","reviver","_this","length","renderOnAddRemove","util","enlivenObjects","enlivenedObjects","forEach","obj","index","insertAt","ReloadJson","renderJsonData","loadFromJSON","readJsonData","textElement","parse","stack","getMessage","rows","cols","panelStyle","rightPanel","mainStyle","App","webpackEmptyContext","req","Error","code","keys"],"mappings":"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,mBAAmB,kBAAkB,CAAC,IAAI,kBAAkB,iBAAiB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,iBAAiB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,mBAAmB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,mBAAmB,kBAAkB,mBAAmB,mBAAmB,CAAC,IAAI,mBAAmB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,iBAAiB,kBAAkB,kBAAkB,mBAAmB,CAAC,IAAI,mBAAmB,iBAAiB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,kBAAkB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,iBAAiB,mBAAmB,CAAC,IAAI,kBAAkB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,kBAAkB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,kBAAkB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,kBAAkB,kBAAkB,kBAAkB,oBAAoB,CAAC,IAAI,kBAAkB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,kBAAkB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,kBAAkB,kBAAkB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,kBAAkB,mBAAmB,CAAC,IAAI,kBAAkB,mBAAmB,kBAAkB,oBAAoB,CAAC,IAAI,mBAAmB,mBAAmB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,kBAAkB,mBAAmB,oBAAoB,CAAC,IAAI,mBAAmB,kBAAkB,mBAAmB,oBAAoB,CAAC,IA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","file":"static/js/main.56c8cb0c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"spinner_loader__ra5Qt\",\"loaderDiv\":\"spinner_loaderDiv__CGRU1\",\"loaderPosition\":\"spinner_loaderPosition__39-tc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"boxTitle\":\"panel_boxTitle__3jo6l\",\"box\":\"panel_box__3GlYz\",\"settings\":\"panel_settings__3gxfa\",\"scrollbar\":\"panel_scrollbar__15-3B\",\"style-1\":\"panel_style-1__3RdMI\",\"fa-lg\":\"panel_fa-lg__3vkO0\",\"fa\":\"panel_fa__2Xt0s\",\"mainMenu\":\"panel_mainMenu__2ZkIY\",\"expanded\":\"panel_expanded__1ziSv\",\"nav-icon\":\"panel_nav-icon__13207\",\"navText\":\"panel_navText__yrjU2\",\"no-touch\":\"panel_no-touch__2Lbbm\",\"scrollable\":\"panel_scrollable__ujd_z\",\"hover\":\"panel_hover__24JoD\",\"li\":\"panel_li__r6zEt\",\"darkerli\":\"panel_darkerli__3QA_7\",\"darkerlishadow\":\"panel_darkerlishadow__1NSkN\",\"darkerlishadowdown\":\"panel_darkerlishadowdown__3EfHO\",\"active\":\"panel_active__1OA5b\",\"dropdown-menu\":\"panel_dropdown-menu__Z4T39\",\"dashboard-page\":\"panel_dashboard-page__13Z1o\",\"dashboard-menu\":\"panel_dashboard-menu__130En\",\"area\":\"panel_area__Zkf20\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"button_btn__p5kIX\",\"brush\":\"button_brush__1xceI\",\"panelBtn\":\"button_panelBtn__1haUV\"};","const fabric = window.fabric\r\n\r\nconst defaultProps = {\r\n    top: 100,\r\n    left: 100,\r\n    fontSize: 18,\r\n    width: 100,\r\n    fontFamily: 'Times New Roman',\r\n    selectable: true\r\n}\r\n\r\nlet TextBox = (id=1, props={}) => {\r\n        console.log('textID', id);\r\n        return new fabric.Textbox(\"Your text goes here\",\r\n          { ...defaultProps, id: id,\r\n          top: (defaultProps.top+200+id),\r\n          left: (defaultProps.left+200+id)});\r\n}\r\n\r\nexport default TextBox;\r\n","const fabric = window.fabric\r\n\r\nconst defaultProps = {\r\n  top: 100,\r\n  left: 150,\r\n  width: 50,\r\n  height: 50,\r\n  fill: 'rgba(0,0,0,0)',\r\n  stroke: 'black',\r\n  strokeWidth: 1,\r\n  selectable: true\r\n}\r\n\r\nlet Rect = (id=1, props={}) => {\r\n  console.log('textID', id);\r\n  return new fabric.Rect(\r\n    { ...defaultProps, id: id,\r\n      top: (defaultProps.top+200+id),\r\n      left: (defaultProps.left+200+id)});\r\n}\r\n\r\nexport default Rect;\r\n","const fabric = window.fabric\r\n\r\nconst defaultProps = {\r\n  top: 100,\r\n  left: 100,\r\n  radius: 20,\r\n  fill: 'rgba(0,0,0,0)',\r\n  stroke: 'black',\r\n  strokeWidth: 1,\r\n  selectable: true\r\n}\r\n\r\nlet Circle = (id=1, props={}) => {\r\n  console.log('textID', id);\r\n  return new fabric.Circle(\r\n    { ...defaultProps, id: id,\r\n      top: (defaultProps.top+200+id),\r\n      left: (defaultProps.left+200+id)});\r\n}\r\n\r\nexport default Circle;\r\n","const fabric = window.fabric;\r\n\r\nconst defaultProps = {\r\n  fill: 'red',\r\n  stroke: 'red',\r\n  strokeWidth: 2,\r\n  selectable: true\r\n}\r\n\r\nclass Line {\r\n  constructor(canvas) {\r\n    this.theCanvas = canvas;\r\n  }\r\n\r\n  makeLine = (id=1, props, coordinates=[250, 125, 250, 175]) => {\r\n    console.log('textID', id);\r\n    let line = fabric.Line(coordinates, {...defaultProps, id: id, ...props});\r\n    let theCanvas = this.theCanvas;\r\n    this.theCanvas.on('mouse:down', function (o, theCanvas, line) {\r\n      theCanvas.isDrawing = true;\r\n      let pointer = theCanvas.getPointer(o.e);\r\n      let points = [pointer.x, pointer.y, pointer.x, pointer.y];\r\n\r\n      line = new fabric.Line(points, {\r\n        strokeWidth: 3,\r\n        stroke: 'black'\r\n      });\r\n      theCanvas.add(line);\r\n    });\r\n    this.theCanvas.on('mouse:move', function (o, theCanvas, line) {\r\n      if (theCanvas.isDrawing) {\r\n        let pointer = theCanvas.getPointer(o.e);\r\n        line.set({ x2: pointer.x, y2: pointer.y });\r\n        theCanvas.renderAll();\r\n      }\r\n    });\r\n    this.theCanvas.on('mouse:up', function (o, theCanvas) {\r\n      theCanvas.isDrawing = false;\r\n    });\r\n  }\r\n\r\n}\r\n\r\n\r\nexport default Line;\r\n","import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types'\r\nimport Button from '@material-ui/core/Button'\r\nimport buttonStyles from '../../styles/button.module.css'\r\n\r\nclass FileSelector extends Component {\r\n  static propTypes = {\r\n    fileType: PropTypes.string,\r\n    selectImage: PropTypes.func,\r\n    useButton: PropTypes.bool\r\n  }\r\n  static defaultProps = {\r\n    selectImage: function() {},\r\n    fileType: 'image/*',\r\n    useButton: true\r\n  }\r\n\r\n  state = {\r\n    loading: false\r\n  };\r\n\r\n  toBase64 = file => new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n\r\n  fileToBase64 = async (file) => {\r\n    const image = await this.toBase64(file);\r\n    return image;\r\n  }\r\n\r\n  handleChange = selectorFiles => {\r\n    console.log('selectorFiles', selectorFiles);\r\n    this.props.setLoading(true)\r\n    this.file = selectorFiles[0];\r\n    this.fileToBase64(this.file).then(image => {\r\n      this.props.selectImage(image);\r\n      this.props.setLoading(false)\r\n    }).catch(err=> {console.log('File Reader error', err)});\r\n  }\r\n\r\n  render ()\r\n  {\r\n    return (\r\n      <div>\r\n        <Button\r\n          variant={ this.props.useButton ? \"contained\" : \"text\"}\r\n          component=\"label\"\r\n          size={'small'}\r\n          className={buttonStyles.panelBtn}\r\n          color={ this.props.useButton ? \"primary\" : \"default\"}\r\n        >\r\n          Upload an image\r\n          <input type=\"file\"\r\n           onChange={ (e) => this.handleChange(e.target.files) }\r\n           accept={this.props.fileType}\r\n           multiple={false}\r\n           style={{ display: \"none\" }} />\r\n        </Button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default FileSelector;","export default\r\n{\r\n  PROJECT: 'The AlteVision Canvas App',\r\n  VERSION: '1.0.0',\r\n  WS_URL: 'wss://echo.websocket.org' // 'ws://ec2-18-206-120-187.compute-1.amazonaws.com:3000/'\r\n};\r\n","import React, { Component } from 'react';\r\nimport ReconnectingWebSocket from \"reconnectingwebsocket\";\r\nimport PropTypes from 'prop-types';\r\nimport config from '../config/config.dev'\r\n\r\nclass WebSocketService extends Component {\r\n  static propTypes = {\r\n    setClient: PropTypes.func.isRequired,\r\n    sendMessage: PropTypes.func\r\n  }\r\n  state = {\r\n    status: 'Pending...',\r\n    messages: [],\r\n    sendMessage: function() {}\r\n  }\r\n  socketOptions = {debug: true, reconnectInterval: 10000, maxReconnectAttempts: 5}\r\n  client = new ReconnectingWebSocket(config.WS_URL, null, this.socketOptions);\r\n  componentDidMount() {\r\n    this.client.onopen = () => {\r\n      console.log('WebSocket Client Connected');\r\n      this.setState({status: 'connected'})\r\n    };\r\n    this.client.onmessage = (message) => {\r\n      let newMessage = message.data\r\n      // newMessage.push(message.data);\r\n      this.setState({messages: newMessage})\r\n      this.setState({status: 'Message:'+JSON.stringify(newMessage)+' received'})\r\n      console.log('JSON Data sent');\r\n      this.props.sendMessage(newMessage);\r\n    };\r\n    this.props.setClient(this.client);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div style={{display: 'none'}}>\r\n        Connection status:\r\n        {this.state.status}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WebSocketService;","import React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FileSelector from '../Image/ImagePicker'\r\nimport { Button } from '@material-ui/core';\r\nimport WebSocketService from '../../services/webSocketService'\r\nimport buttonStyles from '../../styles/button.module.css'\r\n\r\nclass BackgroundControlPanel extends Component {\r\n  static propTypes = {\r\n    selectImage: PropTypes.func,\r\n    setLoading: PropTypes.func,\r\n    canvas: PropTypes.object.isRequired\r\n  }\r\n  static defaultProps = {\r\n    selectImage: function() {},\r\n    setLoading: function() {},\r\n    canvas: null\r\n  }\r\n\r\n  state = {\r\n    wsConnect: false\r\n  }\r\n\r\n  canvasToJson = event => {\r\n    event.preventDefault()\r\n    let jsonData = JSON.stringify(this.props.canvas.toJSON());\r\n    navigator.clipboard.writeText(jsonData)\r\n      .then(r => {alert('JSON Copied to clipboard')});\r\n    console.log(jsonData);\r\n  }\r\n\r\n  clear = e => {\r\n    e.preventDefault()\r\n    this.props.canvas.clear();\r\n    this.props.canvas.backgroundImage = null;\r\n    this.props.canvas.backgroundColor = \"#ffffff\";\r\n    this.props.canvas.renderAll();\r\n  }\r\n\r\n  setLoading = status => {\r\n    this.setState({isLoading: status})\r\n  }\r\n\r\n  connectToWS = e => {\r\n    e.preventDefault();\r\n    this.setState({wsConnect: true})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Fragment>\r\n          <FileSelector selectImage={this.props.selectImage} setLoading={this.props.setLoading}/>\r\n          <Button className={buttonStyles.panelBtn} size={'small'} variant=\"contained\" color=\"default\"\r\n                  onClick={e => this.props.updateImage}>\r\n            Resize Image\r\n          </Button>\r\n        <br />\r\n          <Button className={buttonStyles.panelBtn} size={'small'} variant=\"contained\" color=\"default\"\r\n            onClick={e => this.canvasToJson(e)}>\r\n            To JSON\r\n          </Button>\r\n        <br />\r\n          <Button variant=\"contained\" color=\"default\" size={'small'} className={buttonStyles.panelBtn}\r\n            onClick={e => this.clear(e)}>\r\n            Clear Canvas\r\n          </Button>\r\n        <br />\r\n          <Button variant=\"contained\" color=\"default\" size={'small'} className={buttonStyles.panelBtn}\r\n                  onClick={e => this.connectToWS(e)}>\r\n            Connect to WS\r\n          </Button>\r\n        <WebSocketService setClient={this.props.setClient} sendMessage={function(msg) {}}/>\r\n    {/*//     <div>*/}\r\n    {/*//     <label form=\"images\">Choose a background image:</label>*/}\r\n    {/*//     <canvas id=\"the-canvas\" style={{ border: '1px solid black', display: 'none' }}/>*/}\r\n    {/*//     <select id=\"images\" onChange={val => this.props.selectImage(val)}>*/}\r\n    {/*//       <option value=\"\"/>*/}\r\n    {/*//       <option value=\"https://i.imgur.com/MrGY5EL.jpg\">Grassland</option>*/}\r\n    {/*//       <option value=\"https://i.imgur.com/EVOFpNF.jpg\">Snow</option>*/}\r\n    {/*//       <option value=\"https://i.imgur.com/pSJwd0s.jpg\">Green Canvas</option>*/}\r\n    {/*//     </select>*/}\r\n    {/*//*/}\r\n    {/*//     <label form=\"imagesPdf\">Choose a image from pdf:</label>*/}\r\n    {/*//     <canvas id=\"the-canvas\" style={{ border: '1px solid black', display: 'none' }}/>*/}\r\n    {/*//     <select id=\"imagesPdf\" onChange={val => this.props.selectImage(val)}>*/}\r\n    {/*//       <option value='-1'>No Page Selected</option>*/}\r\n    {/*//       <option value='1'>Page-1</option>*/}\r\n    {/*//       <option value='2'>Page-2</option>*/}\r\n    {/*//       <option value='3'>Page-3</option>*/}\r\n    {/*//       <option value='4'>Page-4</option>*/}\r\n    {/*//     </select>*/}\r\n    {/*// </div>*/}\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default BackgroundControlPanel || null;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport omit from 'lodash.omit'\r\nimport FileSelector from './ImagePicker'\r\n\r\nconst fabric = window.fabric\r\n\r\nclass Picture extends React.Component {\r\n  static propTypes = {\r\n    canvas: PropTypes.object,\r\n    scale: PropTypes.number.isRequired\r\n  }\r\n\r\n  static defaultProps = {\r\n    scale: 0.5,\r\n  }\r\n\r\n  selectPicture = image => {\r\n    const options = omit(this.props, ['scale'])\r\n    fabric.Image.fromURL(image, img => {\r\n      img.scale(this.props.scale)\r\n      img.selectable = true;\r\n      this.props.canvas.add(img)\r\n    }, options)\r\n  }\r\n\r\n  render() {\r\n    return <FileSelector selectImage={this.selectPicture} setLoading={this.props.setLoading} useButton={false}/>\r\n  }\r\n}\r\n\r\nexport default Picture;\r\n","import React, { Component } from 'react';\r\nimport PropTypes, { element } from 'prop-types'\r\nimport { FaSquareFull, FaCircle, FaFileImage, FaPencilAlt, FaEraser, FaICursor,\r\n          FaSlash, FaMousePointer, FaRegWindowClose, FaUndo, FaPaintBrush, FaPalette,\r\n          FaAngleDoubleRight} from 'react-icons/fa';\r\nimport styles from '../../styles/button.module.css';\r\nimport panelStyles from '../../styles/panel.module.css';\r\nimport pdfjs from 'pdfjs-dist';\r\nimport TextBox from '../TextBox'\r\nimport Rect from '../Figures/Rect'\r\nimport Circle from '../Figures/Circle'\r\nimport Line from '../Figures/Line'\r\nimport BackgroundControlPanel from './extendedPanel';\r\nimport Picture from '../Image/Picture'\r\n\r\n// const pdfjsLib = window['pdfjs-dist/build/pdf'];\r\nconst fabric = window.fabric;\r\n\r\nclass Panel extends Component {\r\n  static propTypes = {\r\n    canvas: PropTypes.object.isRequired,\r\n    onChange: PropTypes.func,\r\n    updateCanvas: PropTypes.func,\r\n    addBackgroundImg: PropTypes.func,\r\n    setLoading: PropTypes.func,\r\n    setClient: PropTypes.func,\r\n  }\r\n  static defaultProps = {\r\n    onChange: function () {},\r\n    showFigures: function () {},\r\n    setLoading: function() {}\r\n  }\r\n\r\n  state = {\r\n    brushsize: 10,\r\n    canDraw: false,\r\n    brushcolor:\"#ff0000\",\r\n    backgroundImg: null,\r\n    addTextBox: false,\r\n    eraserActive: false,\r\n    selectedOption: 'select',\r\n    cursor: 'pointer'\r\n  }\r\n\r\n  componentMap = {\r\n    'textBox': TextBox,\r\n    'rect': Rect,\r\n    'circle': Circle,\r\n  }\r\n  counter = 1;\r\n\r\n  componentDidMount () {\r\n    // console.log('CPPP',  this.props.canvas);\r\n    // let selectedImg = document.getElementById('images').value;\r\n    // this.props.addBackgroundImg(selectedImg);\r\n    // this.setState({backgroundImg: selectedImg});\r\n  }\r\n\r\n  resetBrush = () => {\r\n    if (this.state.eraserActive) {\r\n      console.log('resetBrush');\r\n      this.props.canvas.freeDrawingBrush = new fabric.PencilBrush();\r\n      this.props.canvas.freeDrawingBrush.width = this.state.brushsize;\r\n      this.props.canvas.isDrawingMode = false;\r\n      this.props.canvas.freeDrawingBrush.color = this.state.brushcolor;\r\n      this.setState({eraserActive: false});\r\n    }\r\n  }\r\n\r\n  brushSizeChange = (event, size) => {\r\n    event.preventDefault();\r\n    console.log('brushSizeChange');\r\n    this.setState({ brushsize: size }, function () {\r\n      this.props.onChange(this.state)\r\n    }.bind(this));\r\n  }\r\n\r\n  enableSelection = event => {\r\n    event.preventDefault();\r\n    this.setState({ canDraw: false, selectedOption: 'select'}, function () {\r\n      this.props.onChange(this.state)\r\n    }.bind(this));\r\n  }\r\n\r\n  canUseBrush = event => {\r\n    let curColor = document.getElementById('color').value;\r\n    this.setState({ canDraw: true, selectedOption: 'pencil',\r\n      brushcolor: this.state.eraserActive ? curColor: this.state.brushcolor,\r\n      cursor: \"url(../../assets/cursor_pencil.png) 0 0, auto\"}, function () {\r\n      this.props.onChange(this.state)\r\n    }.bind(this));\r\n  }\r\n\r\n  brushColorChange = event => {\r\n    console.log('brushColorChange');\r\n    this.setState({ brushcolor: event.target.value }, function () {\r\n      this.props.onChange(this.state)\r\n    }.bind(this));\r\n  }\r\n\r\n  eraser = (e) => {\r\n    e.preventDefault();\r\n    console.log('eraser');\r\n    this.setState({ brushcolor: 'white', canDraw: true,\r\n      eraserActive: true, selectedOption: 'erase' }, function () {\r\n      this.props.onChange(this.state)\r\n    }.bind(this));\r\n  }\r\n\r\n  undoRedo = event => {\r\n    event.preventDefault();\r\n    this.props.canvas.remove(this.props.canvas.getObjects().slice(-1).pop());\r\n  }\r\n\r\n  deleteObj = event => {\r\n    event.preventDefault();\r\n    this.props.canvas.remove(this.props.canvas.getActiveObject());\r\n  }\r\n\r\n\r\n  selectImage = img => {\r\n    // let selectedImg = document.getElementById('images').value;\r\n    // let pageNo = document.getElementById('imagesPdf').value;\r\n    // pageNo = parseInt(pageNo);\r\n    // if ( pageNo !== -1)\r\n    // {\r\n    //   this.readPDF(pageNo).then(img => {\r\n    //     this.props.addBackgroundImg(img);\r\n    //     this.setState({backgroundImg: img});\r\n    //   });\r\n    // }\r\n    let selectedImg = img;\r\n    this.props.addBackgroundImg(selectedImg);\r\n    this.setState({backgroundImg: selectedImg});\r\n  }\r\n\r\n  readPDF = (pageNo) => {\r\n    let pdfImage;\r\n    pdfjs.disableWorker = true;\r\n    pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n    let testUrl= \"https://gahp.net/wp-content/uploads/2017/09/sample.pdf\"\r\n    let corsUrl = 'https://cors-anywhere.herokuapp.com/'\r\n    return pdfjs.getDocument({ url: corsUrl+testUrl }).then(function getPdfHelloWorld(pdf) {\r\n      return pdf.getPage(pageNo).then(function getPageHelloWorld(page) {\r\n        const scale = 1.5\r\n        const viewport = page.getViewport(scale)\r\n        let canvas = document.getElementById('the-canvas');\r\n        let context = canvas.getContext('2d');\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n        let task = page.render({canvasContext: context, viewport: viewport})\r\n        return task.promise.then(function(){\r\n          pdfImage = canvas.toDataURL('image/jpeg');\r\n          return pdfImage;\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  addElement = (e, element) => {\r\n    e.preventDefault();\r\n    const canvasElement = this.componentMap[element](this.counter, {stroke: this.state.brushcolor});\r\n    console.log('addElement', this.props.canvas);\r\n    this.props.canvas.add(canvasElement);\r\n    this.props.canvas.setActiveObject(canvasElement);\r\n    this.props.canvas.isDrawingMode = false;\r\n    this.props.canvas.renderAll();\r\n    this.counter ++;\r\n    this.props.updateCanvas(this.props.canvas);\r\n  }\r\n\r\n  drawLine = (e, element) => {\r\n    e.preventDefault();\r\n    let line = new Line(this.props.canvas);\r\n    line.makeLine(this.counter, {stroke: this.state.brushcolor});\r\n    this.counter ++;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <nav className={panelStyles.mainMenu}>\r\n        <div className={panelStyles.settings}>Canvas Tools</div>\r\n        <div className={panelStyles.scrollbar} id=\"style-1\">\r\n          <ul>\r\n          <li className={panelStyles.darkerli}>\r\n            <a onClick={this.enableSelection}>\r\n              <button title=\"Select\" className={styles.btn} id=\"select\"> <FaMousePointer />\r\n              </button>\r\n              <span className={panelStyles.navText}>Select</span>\r\n            </a>\r\n          </li>\r\n          <li className={panelStyles.darkerli}>\r\n            <a onClick={this.canUseBrush}>\r\n              <button title=\"Pencil Tool\" className={styles.btn} id=\"canDraw\"> <FaPencilAlt />\r\n              </button>\r\n              <span className={panelStyles.navText}>Pencil</span>\r\n            </a>\r\n          </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={this.eraser}>\r\n              <button title=\"Eraser\" className={styles.btn} id=\"erase\"> <FaEraser />\r\n              </button>\r\n              <span className={panelStyles.navText}>Eraser</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={event => {this.addElement(event,'textBox')}}>\r\n              <button title=\"Text Box\" className={styles.btn} id=\"textBox\"><FaICursor />\r\n              </button>\r\n              <span className={panelStyles.navText}>Text Box</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a>\r\n                <button title=\"pic\" className={styles.btn} id=\"pic\">\r\n                  <FaFileImage />\r\n                </button>\r\n                <span className={panelStyles.navText}>Add Picture\r\n                <Picture canvas={this.props.canvas} setLoading={this.props.setLoading}/>\r\n                </span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={event => {this.addElement(event,'rect')}}>\r\n                <button title=\"Rectangle\" className={styles.btn} id=\"rect\">\r\n                  <FaSquareFull />\r\n                </button>\r\n                <span className={panelStyles.navText}>Add Rectangle</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={event => {this.addElement(event,'circle')}}>\r\n                <button title=\"Circle\" className={styles.btn} id=\"circle\">\r\n                  <FaCircle />\r\n                </button>\r\n                <span className={panelStyles.navText}>Add Circle</span>\r\n              </a>\r\n            </li>\r\n            {/*<li className={panelStyles.darkerli}>*/}\r\n            {/*  <a>*/}\r\n            {/*  <button disabled={true} title=\"Draw Line\" className={styles.btn} id=\"line\" onClick={event => {this.drawLine(event,'line')}}><FaSlash />*/}\r\n            {/*  </button>*/}\r\n            {/*  <span className={panelStyles.navText}>Draw Line</span>*/}\r\n            {/*  </a>*/}\r\n            {/*</li>*/}\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={event => {this.deleteObj(event)}}>\r\n                <button title=\"Delete\" className={styles.btn} id=\"del\">\r\n                  <FaRegWindowClose />\r\n                </button>\r\n                <span className={panelStyles.navText}>Delete Selection</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a onClick={event => {this.undoRedo(event)}}>\r\n                <button title=\"Undo\" className={styles.btn} id=\"undo\">\r\n                  <FaUndo />\r\n                </button>\r\n                {/*<button title=\"Redo\" className={styles.btn} id=\"redo\">*/}\r\n                {/*  <FaRegWindowClose />*/}\r\n                {/*</button>*/}\r\n                <span className={panelStyles.navText}>Undo</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a>\r\n                <FaPalette className={styles.btn}/>\r\n              <span className={panelStyles.navText}>\r\n                <input title=\"Color Selector\" id=\"color\" type=\"color\" defaultValue=\"#ff0000\"\r\n                       onChange={this.brushColorChange}/>\r\n                Color Selector</span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a>\r\n                <FaPaintBrush className={styles.btn}/>\r\n              <span className={panelStyles.navText}>\r\n                <button title=\"brushSize1\" id=\"brushSize1\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,2)}><FaCircle style={{fontSize: 2}}/>\r\n                </button>\r\n                <button title=\"brushSize2\" id=\"brushSize2\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,5)}><FaCircle style={{fontSize: 5}}/>\r\n                </button>\r\n                <button title=\"brushSize3\" id=\"brushSize3\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,10)}><FaCircle style={{fontSize: 10}}/>\r\n                </button>\r\n                <button title=\"brushSize4\" id=\"brushSize4\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,15)}><FaCircle style={{fontSize: 15}}/>\r\n                </button>\r\n                <button title=\"brushSize5\" id=\"brushSize5\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,20)}><FaCircle style={{fontSize: 20}}/>\r\n                </button>\r\n                <button title=\"brushSize6\" id=\"brushSize6\" className={styles.brush}\r\n                        onClick={event => this.brushSizeChange(event,25)}><FaCircle style={{fontSize: 25}}/>\r\n                </button>\r\n              </span>\r\n              </a>\r\n            </li>\r\n            <li className={panelStyles.darkerli}>\r\n              <a>\r\n              <FaAngleDoubleRight className={styles.btn}/>\r\n              <span className={panelStyles.navText}><\r\n                BackgroundControlPanel\r\n                selectImage={this.selectImage}\r\n                setLoading={this.props.setLoading}\r\n                canvas={this.props.canvas}\r\n                setClient={this.props.setClient}\r\n              />\r\n              </span>\r\n              </a>\r\n            </li>\r\n\r\n          {/*<button title=\"Add Rectangle\" id=\"rect\" className={styles.btn} onClick={this.renderFigure}><FaSquareFull />*/}\r\n          {/*</button>*/}\r\n          {/*<button title=\"Add Circle\" id=\"circle\" className={styles.btn} onClick={this.renderFigure}><FaCircle />*/}\r\n          {/*</button>*/}\r\n          {/*<button title=\"Add PNG\" id=\"image\" className={styles.btn} onClick={this.renderFigure}><FaFileImage />*/}\r\n          {/*</button>*/}\r\n        </ul>\r\n        </div>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Panel;\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Dialog, MenuItem  } from 'material-ui';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogTitle';\r\nimport DialogContentText from '@material-ui/core/DialogTitle';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider'\r\nimport { Button } from '@material-ui/core';\r\n\r\nclass DialogBox extends React.Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    open: PropTypes.bool,\r\n    selectedValue: PropTypes.string.isRequired,\r\n  }\r\n\r\n  static defaultProps = {\r\n    selectedValue: '',\r\n    open: false\r\n  }\r\n\r\n  state = {\r\n    size: 'os',\r\n    open: this.props.open,\r\n    position: 'center'\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleSizeChange = event => {\r\n    this.setState({size: event.target.value})\r\n  }\r\n\r\n  handlePositionChange = event => {\r\n    this.setState({position: event.target.value})\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({open: false})\r\n    this.props.onClose(this.state.size, this.state.position);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n    <MuiThemeProvider>\r\n      <Dialog onClose={this.handleClose} aria-labelledby=\"simple-dialog-title\" open={this.state.open} style={{zIndex: 1}}>\r\n        <DialogContent>\r\n          <DialogContentText>Select the size & position of background Image uploaded\r\n          </DialogContentText>\r\n          <form noValidate style={ {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            margin: 'auto',\r\n            width: 'fit-content',\r\n          }}>\r\n            <FormControl style={{minWidth: 120}}>\r\n              <InputLabel htmlFor=\"sizeOptions\">Background resize</InputLabel>\r\n              <Select\r\n                value={this.state.size}\r\n                onChange={this.handleSizeChange}\r\n                inputProps={{\r\n                  name: 'sizeOptions',\r\n                  id: 'sizeOptions',\r\n                }}\r\n              >\r\n                <MenuItem value='os'>Original Size</MenuItem>\r\n                <MenuItem value=\"s\">Stretched</MenuItem>\r\n                <MenuItem value='sh'>Stretch Height</MenuItem>\r\n                <MenuItem value='sw'>Stretch Width</MenuItem>\r\n              </Select>\r\n              <InputLabel htmlFor=\"position\">Position</InputLabel>\r\n              <Select\r\n                value={this.state.position}\r\n                onChange={this.handlePositionChange}\r\n                inputProps={{\r\n                  name: 'position',\r\n                  id: 'position',\r\n                }}>\r\n                <MenuItem value='center'>Center</MenuItem>\r\n                <MenuItem value='topLeft'>Top Left</MenuItem>\r\n                <MenuItem value='topCenter'>Top Center</MenuItem>\r\n                <MenuItem value='topRight'>Top Right</MenuItem>\r\n                <MenuItem value='leftCenter'>Left Center</MenuItem>\r\n                <MenuItem value='rightCenter'>Right Center</MenuItem>\r\n                <MenuItem value='bottomLeft'>Bottom Left</MenuItem>\r\n                <MenuItem value='bottomCenter'>Bottom Center</MenuItem>\r\n                <MenuItem value='bottomRight'>Bottom Right</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n          </form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={this.handleClose} color=\"primary\" autoFocus>\r\n            OK\r\n          </Button>\r\n          <Button onClick={this.handleClose} color=\"primary\">\r\n            Close\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogBox;","const imageResizePosition = (canvas, img, size, position) => {\r\n  let cw = canvas.width;\r\n  let ch = canvas.height;\r\n  let imgWidth = img.width;\r\n  let imgHeight = img.height;\r\n  if (size === 's') {\r\n    return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n      scaleX: cw / imgWidth,\r\n      scaleY: ch / imgHeight\r\n    });\r\n  }\r\n  else if (size === 'sh') {\r\n    if (position === 'topLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'topCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: 0,\r\n        left: cw/2 - imgWidth/2,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'topRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: cw,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'center') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: cw/2 - imgWidth/2,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'leftCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'rightCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: cw - imgWidth,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'bottomLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: 0,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'bottomCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: cw/2 - imgWidth/2,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else if (position === 'bottomRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        left: cw - imgWidth,\r\n        scaleY: ch / imgHeight\r\n      });\r\n    }\r\n    else {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\r\n    }\r\n  }\r\n  if (size === 'sw') {\r\n    if (position === 'topLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'topCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: 0,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'topRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: 0,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'center') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'leftCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'rightCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'bottomLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'bottomCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else if (position === 'bottomRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        scaleX: cw / imgWidth\r\n      });\r\n    }\r\n    else {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\r\n    }\r\n  }\r\n  else if (size === 'os') {\r\n    if (position === 'topLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\r\n    }\r\n    else if (position === 'topCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: 0,\r\n        left: cw/2 - imgWidth/2\r\n      });\r\n    }\r\n    else if (position === 'topRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: 0,\r\n        left: cw\r\n      });\r\n    }\r\n    else if (position === 'center') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2,\r\n        left: cw/2 - imgWidth/2\r\n      });\r\n    }\r\n    else if (position === 'leftCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2\r\n      });\r\n    }\r\n    else if (position === 'rightCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch/2 - imgHeight/2,\r\n        left: cw - imgWidth\r\n      });\r\n    }\r\n    else if (position === 'bottomLeft') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        left: 0\r\n      });\r\n    }\r\n    else if (position === 'bottomCenter') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        left: cw/2 - imgWidth/2\r\n      });\r\n    }\r\n    else if (position === 'bottomRight') {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas), {\r\n        top: ch - imgHeight,\r\n        left: cw - imgWidth\r\n      });\r\n    }\r\n    else {\r\n      return canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\r\n    }\r\n  }\r\n}\r\n\r\nexport default imageResizePosition;","import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport canvasStyle from './styles/canvas.module.css'\r\nimport Panel from './components/ControlPanel/panel'\r\nimport { AppBar, Toolbar, IconButton  } from 'material-ui';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\r\nimport DialogBox from './components/DialogBox'\r\nimport imageResizePosition from './components/Utils/Utility'\r\nimport spinnerStyles from './styles/spinner.module.css'\r\nimport BounceLoader from 'react-spinners/BounceLoader'\r\n\r\nconst fabric = window.fabric;\r\nfabric.Object.prototype.selectable = false;\r\n\r\nclass DesignCanvas extends React.Component {\r\n  static propTypes = {\r\n    width: PropTypes.number.isRequired,\r\n    height: PropTypes.number.isRequired,\r\n  }\r\n\r\n  static defaultProps = {\r\n    width: 1200,\r\n    height: 800,\r\n  }\r\n\r\n  canvas = new fabric.Canvas(this.c);\r\n\r\n  state = {\r\n    mousecursor: null,\r\n    backgroundImg: null,\r\n    canvas: this.canvas,\r\n    setSizeBackgroundImg: false,\r\n    isLoading: false,\r\n    client: null\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log('componentDidMount');\r\n    this.canvas = new fabric.Canvas(this.c)\r\n    console.log('screen.height', window.innerWidth, window.innerHeight)\r\n    this.canvas.setWidth(window.innerWidth-140);\r\n    this.canvas.setHeight(window.innerHeight-50);\r\n    this.canvas.calcOffset();\r\n    this.canvas.backgroundColor = \"#ffffff\";\r\n    this.canvas.freeDrawingBrush.width = 10;\r\n    this.canvas.isDrawingMode = false;\r\n    this.canvas.freeDrawingBrush.color = \"#ff0000\";\r\n    this.canvas.renderAll();\r\n    this.setState({canvas: this.canvas});\r\n    this.interval = setInterval(() => this.sendCanvasData(), 10000);\r\n  }\r\n\r\n  updateCanvas = newCanvas => {\r\n    this.canvas = newCanvas;\r\n    this.canvas.renderAll();\r\n    this.setState({canvas: newCanvas});\r\n    console.log('newCanvas', newCanvas)\r\n    console.log(' this.canvas',  this.canvas);\r\n  }\r\n\r\n  onControlChange = data => {\r\n    this.canvas.freeDrawingBrush.width = data.brushsize;\r\n    this.canvas.isDrawingMode = data.canDraw;\r\n    this.canvas.freeDrawingBrush.color = data.brushcolor;\r\n    this.canvas.renderAll();\r\n    console.log('onControlChange', this.canvas.getObjects());\r\n  }\r\n\r\n  addBackgroundImg = imagePath => {\r\n    console.log(imagePath);\r\n    this.setState({backgroundImg: imagePath, setSizeBackgroundImg: true})\r\n  }\r\n\r\n  backgroundImgResize = (size, position) => {\r\n    let canvas = this.canvas;\r\n    fabric.Image.fromURL(this.state.backgroundImg, function(img) {\r\n      // add background image\r\n      canvas = imageResizePosition(canvas, img, size, position);\r\n    });\r\n    this.canvas = canvas;\r\n    this.setState({setSizeBackgroundImg: false})\r\n  }\r\n\r\n  canvasToJson = event => {\r\n      event.preventDefault()\r\n      let jsonData = JSON.stringify(this.canvas.toJSON());\r\n      navigator.clipboard.writeText(jsonData)\r\n        .then(r => {alert('JSON Copied to clipboard')});\r\n      console.log(jsonData);\r\n  }\r\n\r\n  sendCanvasData = () => {\r\n    let jsonData = JSON.stringify(this.canvas.toJSON());\r\n    this.state.client.send(jsonData);\r\n  }\r\n\r\n  setClient = client => {\r\n    this.setState({client});\r\n  }\r\n\r\n  setLoading = status => {\r\n    this.setState({isLoading: status})\r\n  }\r\n\r\n  clear = e => {\r\n    e.preventDefault()\r\n    this.canvas.clear();\r\n    this.canvas.backgroundImage = null;\r\n    this.canvas.backgroundColor = \"#ffffff\";\r\n    this.canvas.renderAll();\r\n  }\r\n\r\n\r\n  render() {\r\n    // const children = React.Children.map(this.state.children, child => {\r\n    //   return React.cloneElement( child, {\r\n    //     canvas: this.canvas,\r\n    //     updateCanvas: this.updateCanvas,\r\n    //   })\r\n    // })\r\n    const { width, height } = this.props\r\n    return (\r\n      <Fragment>\r\n        <MuiThemeProvider>\r\n        <AppBar position=\"static\" className={canvasStyle.topNav} showMenuIconButton={false}>\r\n          <div className={canvasStyle.title}>\r\n            The AlteVision Canvas App\r\n          </div>\r\n          <Toolbar>\r\n            <IconButton\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              edge=\"end\">\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        </MuiThemeProvider>\r\n        <div className={canvasStyle.wrapper}>\r\n          <canvas ref={c => (this.c = c)} width={width} height={height} className={canvasStyle.canvasStyle}/>\r\n        </div>\r\n        {this.state.setSizeBackgroundImg && \r\n          <DialogBox onClose={this.backgroundImgResize} selectedValue={'osc'} open={this.state.setSizeBackgroundImg} />}\r\n        {this.state.isLoading && <div className={spinnerStyles.loaderDiv}>\r\n          <div className={spinnerStyles.loaderPosition}>\r\n            <BounceLoader\r\n              style={spinnerStyles.loader}\r\n              size={60}\r\n              color={\"#2fffa8\"}\r\n              loading={this.state.loading}\r\n            />\r\n            Loading...\r\n          </div>\r\n        </div>}\r\n        <Panel\r\n          canvas={this.state.canvas}\r\n          onChange={this.onControlChange}\r\n          updateCanvas={this.updateCanvas}\r\n          addBackgroundImg={this.addBackgroundImg}\r\n          setLoading={this.setLoading}\r\n          setClient={this.setClient}\r\n        />\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default DesignCanvas;\r\n","const sampleJsonData = {\"objects\":[{\"type\":\"rect\",\"originX\":\"left\",\"originY\":\"top\",\"left\":0,\"top\":0,\"width\":100,\"height\":100,\"fill\":\"blue\",\"stroke\":null,\"strokeWidth\":1,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeLineJoin\":\"miter\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"rx\":0,\"ry\":0},{\"type\":\"circle\",\"originX\":\"left\",\"originY\":\"top\",\"left\":0,\"top\":200,\"width\":40,\"height\":40,\"fill\":\"red\",\"stroke\":null,\"strokeWidth\":1,\"strokeDashArray\":null,\"strokeLineCap\":\"butt\",\"strokeLineJoin\":\"miter\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"radius\":20,\"startAngle\":0,\"endAngle\":6.283185307179586},{\"type\":\"path\",\"originX\":\"center\",\"originY\":\"center\",\"left\":187.94,\"top\":118.23,\"width\":98.29,\"height\":68.31,\"fill\":null,\"stroke\":\"#ff0000\",\"strokeWidth\":10,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeLineJoin\":\"round\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"path\":[[\"M\",138.79353648729156,152.38180373184392],[\"Q\",138.79353648729156,152.38180373184392,139.29353648729156,152.38180373184392],[\"Q\",139.79353648729156,152.38180373184392,139.54353648729156,151.8938761474766],[\"Q\",139.29353648729156,151.40594856310923,149.66522711912654,139.2077589539258],[\"Q\",160.03691775096155,127.00956934474239,168.92693829253437,121.15443833233434],[\"Q\",177.81695883410723,115.2993073199263,187.20086940576743,109.44417630751826],[\"Q\",196.58477997742767,103.58904529511021,204.98091048891314,99.19769703580418],[\"Q\",213.3770410003986,94.80634877649815,217.82205127118505,92.36671085466148],[\"Q\",222.26706154197146,89.92707293282479,225.23040172249574,87.97536259535543],[\"Q\",228.19374190302003,86.02365225788608,231.1570820835443,85.53572467351876],[\"Q\",234.1204222640686,85.04779708915142,235.60209235433075,84.55986950478407],[\"L\",237.08376244459288,84.07194192041673]],\"pathOffset\":{\"x\":187.9386494659422,\"y\":118.22687282613032}},{\"type\":\"path\",\"originX\":\"center\",\"originY\":\"center\",\"left\":232.39,\"top\":154.82,\"width\":13.34,\"height\":118.08,\"fill\":null,\"stroke\":\"#ff0000\",\"strokeWidth\":10,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeLineJoin\":\"round\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"path\":[[\"M\",225.71818178267048,95.78220394523282],[\"Q\",225.71818178267048,95.78220394523282,226.21818178267048,95.78220394523282],[\"Q\",226.71818178267048,95.78220394523282,226.46818178267048,96.27013152960016],[\"Q\",226.21818178267048,96.7580591139675,226.21818178267048,98.70976945143684],[\"Q\",226.21818178267048,100.66147978890619,226.71207181275787,109.93210389188559],[\"Q\",227.20596184284526,119.202727994865,228.19374190302,127.49749692910973],[\"Q\",229.18152196319477,135.79226586335446,230.6631920534569,145.5508175507012],[\"Q\",232.14486214371905,155.30936923804794,232.14486214371905,161.6524278348233],[\"Q\",232.14486214371905,167.9954864315987,232.63875217380644,171.8989071065374],[\"Q\",233.13264220389382,175.8023277814761,234.12042226406857,177.2661105345781],[\"Q\",235.10820232424334,178.7298932876801,236.0959823844181,183.12124154698614],[\"Q\",237.08376244459288,187.5125898062922,237.57765247468024,190.44015531249622],[\"Q\",238.07154250476762,193.36772081870023,238.07154250476762,197.27114149363894],[\"Q\",238.07154250476762,201.1745621685776,238.07154250476762,202.1504173373123],[\"Q\",238.07154250476762,203.12627250604697,238.07154250476762,203.61420009041433],[\"Q\",238.07154250476762,204.10212767478166,238.07154250476762,205.07798284351634],[\"Q\",238.07154250476762,206.053838012251,238.07154250476762,206.54176559661835],[\"Q\",238.07154250476762,207.02969318098567,238.565432534855,210.44518627155702],[\"L\",239.0593225649424,213.8606793621284]],\"pathOffset\":{\"x\":232.38875217380644,\"y\":154.8214416536806}},{\"type\":\"path\",\"originX\":\"center\",\"originY\":\"center\",\"left\":259.06,\"top\":219.72,\"width\":216.82,\"height\":17.57,\"fill\":null,\"stroke\":\"#ff0000\",\"strokeWidth\":10,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeLineJoin\":\"round\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"path\":[[\"M\",150.6468972093887,228.4985068931485],[\"Q\",150.6468972093887,228.4985068931485,151.1468972093887,228.4985068931485],[\"Q\",151.6468972093887,228.4985068931485,155.8419074801751,228.4985068931485],[\"Q\",160.03691775096155,228.4985068931485,167.44526820227225,227.52265172441383],[\"Q\",174.85361865358294,226.54679655567915,185.7191993155053,224.59508621820981],[\"Q\",196.58477997742767,222.64337588074045,212.88315097031122,220.69166554327109],[\"Q\",229.18152196319477,218.73995520580175,249.43101319677737,215.81238969959773],[\"Q\",269.68050443036,212.8848241933937,289.43610563385516,212.39689660902638],[\"Q\",309.1917068373504,211.90896902465903,325.490077830234,211.42104144029167],[\"Q\",341.7884488231175,210.93311385592435,352.65402948503987,210.93311385592435],[\"Q\",363.51961014696224,210.93311385592435,365.4951702673118,210.93311385592435],[\"L\",367.47073038766126,210.93311385592435]],\"pathOffset\":{\"x\":259.05881379852497,\"y\":219.71581037453643}},{\"type\":\"path\",\"originX\":\"center\",\"originY\":\"center\",\"left\":443.28,\"top\":155.23,\"width\":140.76,\"height\":157.92,\"fill\":null,\"stroke\":\"#ff0000\",\"strokeWidth\":10,\"strokeDashArray\":null,\"strokeLineCap\":\"round\",\"strokeLineJoin\":\"round\",\"strokeMiterLimit\":10,\"scaleX\":1,\"scaleY\":1,\"angle\":0,\"flipX\":false,\"flipY\":false,\"opacity\":1,\"shadow\":null,\"visible\":true,\"clipTo\":null,\"backgroundColor\":\"\",\"fillRule\":\"nonzero\",\"globalCompositeOperation\":\"source-over\",\"transformMatrix\":null,\"path\":[[\"M\",372.89741074870983,101.63733495764087],[\"Q\",372.89741074870983,101.63733495764087,373.39741074870983,101.63733495764087],[\"Q\",373.89741074870983,101.63733495764087,373.64741074870983,101.14940737327353],[\"Q\",373.39741074870983,100.66147978890619,373.39741074870983,100.17355220453885],[\"Q\",373.39741074870983,99.68562462017152,374.87908083897196,96.7580591139675],[\"Q\",376.3607509292341,93.83049360776347,377.8424210194962,91.87878327029412],[\"Q\",379.3240911097584,89.92707293282479,381.7935412601953,87.97536259535543],[\"Q\",384.2629914106322,86.02365225788608,385.7446615008943,84.55986950478407],[\"Q\",387.22633159115645,83.09608675168207,388.2141116513312,81.63230399858006],[\"Q\",389.201891711506,80.16852124547803,392.1652318920303,79.19266607674336],[\"Q\",395.12857207255456,78.2168109080087,399.57358234334095,78.2168109080087],[\"Q\",404.0185926141274,78.2168109080087,407.9697128548264,77.24095573927403],[\"Q\",411.9208330955255,76.26510057053935,415.8719533362246,76.26510057053935],[\"Q\",419.8230735769236,76.26510057053935,424.7619738777974,76.26510057053935],[\"Q\",429.7008741786712,76.26510057053935,432.1703243291081,76.26510057053935],[\"Q\",434.639774479545,76.26510057053935,437.6031146600693,77.72888332364136],[\"Q\",440.56645484059356,79.19266607674336,442.5420149609431,79.19266607674336],[\"Q\",444.5175750812926,79.19266607674336,447.4809152618169,79.19266607674336],[\"Q\",450.44425544234116,79.19266607674336,452.91370559277806,80.16852124547805],[\"Q\",455.38315574321496,81.14437641421272,457.3587158635645,82.12023158294738],[\"Q\",459.334275983914,83.09608675168207,461.3098361042635,86.02365225788608],[\"Q\",463.28539622461307,88.9512177640901,463.7792862547004,93.83049360776347],[\"Q\",464.2731762847878,98.70976945143684,464.76706631487514,104.07697287947755],[\"Q\",465.26095634496255,109.44417630751826,465.26095634496255,113.34759698245696],[\"Q\",465.26095634496255,117.25101765739565,465.26095634496255,120.66651074796701],[\"Q\",465.26095634496255,124.08200383853837,463.285396224613,127.0095693447424],[\"Q\",461.3098361042635,129.93713485094642,458.8403859538266,132.86470035715044],[\"Q\",456.3709358033897,135.79226586335446,455.38315574321496,138.23190378519115],[\"Q\",454.3953756830402,140.67154170702784,451.9259255326033,143.11117962886453],[\"Q\",449.4564753821664,145.5508175507012,446.4931352016421,148.47838305690522],[\"Q\",443.5297950211178,151.40594856310923,441.5542349007683,153.84558648494593],[\"Q\",439.5786747804188,156.28522440678262,437.6031146600693,158.23693474425198],[\"Q\",435.62755453971977,160.18864508172132,434.14588444945764,163.60413817229266],[\"Q\",432.66421435919546,167.01963126286404,430.19476420875856,171.89890710653742],[\"Q\",427.72531405832166,176.77818295021078,425.7497539379722,181.65745879388413],[\"Q\",423.77419381762263,186.53673463755752,421.30474366718573,192.39186564996555],[\"Q\",418.83529351674883,198.2469966623736,416.8597333963993,204.59005525914898],[\"Q\",414.88417327604975,210.93311385592435,413.4025031857876,214.3486069464957],[\"Q\",411.9208330955255,217.76410003706707,410.9330530353507,220.20373795890376],[\"Q\",409.94527297517595,222.64337588074045,409.94527297517595,225.57094138694447],[\"Q\",409.94527297517595,228.4985068931485,409.94527297517595,230.45021723061785],[\"Q\",409.94527297517595,232.4019275680872,409.94527297517595,233.37778273682187],[\"Q\",409.94527297517595,234.35363790555652,409.94527297517595,233.8657103211892],[\"Q\",409.94527297517595,233.37778273682187,413.89639321587504,228.98643447751584],[\"Q\",417.84751345657406,224.5950862182098,421.30474366718573,222.64337588074045],[\"Q\",424.7619738777974,220.6916655432711,431.1825442689333,217.27617245269977],[\"Q\",437.60311466006925,213.8606793621284,442.0481249308557,212.39689660902638],[\"Q\",446.49313520164213,210.93311385592435,453.90148565295283,208.981403518455],[\"Q\",461.3098361042635,207.02969318098567,464.27317628478784,206.54176559661835],[\"Q\",467.2365164653121,206.053838012251,470.69374667592376,206.053838012251],[\"Q\",474.15097688653543,206.053838012251,479.08987718740923,206.54176559661835],[\"Q\",484.028777488283,207.02969318098567,489.9554578493316,209.46933110282237],[\"Q\",495.88213821038016,211.90896902465903,501.3149285413414,212.8848241933937],[\"Q\",506.7477188723025,213.8606793621284,508.723278992652,214.83653453086305],[\"Q\",510.69883911300155,215.81238969959773,511.19272914308897,215.81238969959773],[\"Q\",511.6866191731763,215.81238969959773,512.1805092032637,216.30031728396506],[\"Q\",512.6743992333511,216.7882448683324,513.1682892634385,217.27617245269974],[\"L\",513.6621792935258,217.76410003706707]],\"pathOffset\":{\"x\":443.2797950211178,\"y\":155.2256540994824}}],\"background\":\"\"};\r\n\r\nexport default sampleJsonData;","import React, { Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport sampleJsonData from './testJsonOutput'\r\nimport styles from './styles/canvas.module.css'\r\nimport panelStyle from './styles/panel.module.css'\r\nimport WebSocketService from './services/webSocketService'\r\n\r\nconst fabric = window.fabric;\r\nfabric.Canvas.prototype._enlivenObjects = function(objects, callback, reviver) {\r\n    var _this = this;\r\n    if (!objects || objects.length === 0) {\r\n      callback && callback();\r\n      return;\r\n    }\r\n    var renderOnAddRemove = this.renderOnAddRemove;\r\n    this.renderOnAddRemove = false;\r\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\r\n      _this.clear(); // add clear operation here, when all objects are loaded\r\n      enlivenedObjects.forEach(function(obj, index) {\r\n        _this.insertAt(obj, index);\r\n      });\r\n      _this.renderOnAddRemove = renderOnAddRemove;\r\n      callback && callback();\r\n    }, null, reviver);\r\n};\r\n\r\n\r\nclass ReloadJson extends React.Component {\r\n  static propTypes = {\r\n    width: PropTypes.number.isRequired,\r\n    height: PropTypes.number.isRequired,\r\n  }\r\n\r\n  static defaultProps = {\r\n    width: 1200,\r\n    height: 800,\r\n  }\r\n\r\n  state = {\r\n    client: null,\r\n    data: {}\r\n  }\r\n\r\n  canvas = new fabric.Canvas(this.c);\r\n\r\n  componentDidMount() {\r\n    this.canvas = new fabric.Canvas(this.c)\r\n    this.canvas.backgroundColor = \"#ffffff\";\r\n    this.canvas.renderAll();\r\n    document.getElementById('jsonText').value = JSON.stringify(sampleJsonData);\r\n  }\r\n\r\n  renderJsonData = (data) => {\r\n    if (data) {\r\n        this.canvas.loadFromJSON(data, this.canvas.renderAll.bind(this.canvas))\r\n        this.canvas.renderAll();\r\n    }\r\n    else {\r\n      this.canvas.loadFromJSON(this.state.data, this.canvas.renderAll.bind(this.canvas))\r\n      this.canvas.renderAll();\r\n    }\r\n  }\r\n\r\n  readJsonData = () => {\r\n    let textElement = document.getElementById('jsonText').value;\r\n    let jsonData = {};\r\n    try {\r\n      JSON.parse(textElement);\r\n      console.log('Rendering JSON...');\r\n      this.setState({data: textElement}, function () {\r\n        this.renderJsonData();\r\n      }.bind(this));\r\n    }\r\n    catch (e) {\r\n      alert('Invalid json');\r\n      console.log(e.stack);\r\n    }\r\n    console.log(jsonData);\r\n  }\r\n\r\n  clear = e => {\r\n    e.preventDefault()\r\n    this.canvas.clear()\r\n  }\r\n\r\n  getMessage = message => {\r\n    try {\r\n      JSON.parse(message);\r\n      this.setState({data: message})\r\n      this.renderJsonData(message);\r\n    }\r\n    catch (e) {\r\n      console.log(e.stack);\r\n    }\r\n  }\r\n\r\n  setClient = client => {\r\n    this.setState({client});\r\n  }\r\n\r\n  render() {\r\n    const { width, height } = this.props;\r\n    return (\r\n      <Fragment>\r\n        <table>\r\n          <tbody>\r\n          <tr>\r\n            <td>\r\n              <canvas ref={c => (this.c = c)} width={width} height={height}\r\n                      className={styles.canvasStyle}/>\r\n              <br />\r\n              <WebSocketService setClient={this.setClient} sendMessage={this.getMessage}/>\r\n              <textarea id=\"jsonText\" defaultValue={JSON.stringify(this.data)}\r\n                        rows=\"10\" cols=\"80\"/>\r\n              <br/>\r\n            </td>\r\n            <td className={panelStyle.rightPanel}>\r\n              <button onClick={this.readJsonData}>\r\n                Render JSON on Canvas\r\n              </button>\r\n              <button\r\n                onClick={this.clear}\r\n              >\r\n                Clear Canvas\r\n              </button>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </table>\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ReloadJson;\r\n","import React from 'react'\r\nimport { Button } from '@material-ui/core'\r\nimport config from './config/config.dev'\r\nimport { Router, Route, Link, browserHistory, IndexRoute } from 'react-router'\r\n\r\nclass Home extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Welcome to {config.PROJECT} !</h1>\r\n        <Button variant=\"contained\" color=\"primary\">\r\n          Teacher WhiteBoard\r\n        </Button>\r\n        <Button variant=\"contained\" color=\"primary\">\r\n          Student WhiteBoard\r\n        </Button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Home;","import React from 'react'\r\nimport { render } from 'react-dom'\r\nimport 'fabric'\r\nimport DesignCanvas from './DesignCanvas'\r\nimport ReloadJson from './ReloadJson'\r\nimport Home from './Home'\r\n\r\nconst mainStyle = {\r\n\r\n}\r\n\r\nconst App = () => (\r\n  <div style={mainStyle}>\r\n      {/*<Router>*/}\r\n      {/*    <Route path = \"/\" component = {App}>*/}\r\n      {/*        <IndexRoute component = {Home} />*/}\r\n      {/*        <Route path = \"home\" component = {Home} />*/}\r\n      {/*        /!*<Route path = \"about\" component = {About} />*!/*/}\r\n      {/*        /!*<Route path = \"contact\" component = {Contact} />*!/*/}\r\n      {/*    </Route>*/}\r\n      {/*</Router>*/}\r\n    <DesignCanvas>\r\n    </DesignCanvas>\r\n    {/*<br />*/}\r\n    {/*<h3>Client Screen</h3>*/}\r\n    {/*<ReloadJson />*/}\r\n  </div>\r\n);\r\n\r\nrender(<App />, document.getElementById('root'))\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvasStyle\":\"canvas_canvasStyle__1syKw\",\"wrapper\":\"canvas_wrapper__Xe9Rz\",\"topNav\":\"canvas_topNav__3gfjH\",\"title\":\"canvas_title__1TzSf\",\"rightNav\":\"canvas_rightNav__2Ydhj\"};","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 89;"],"sourceRoot":""}