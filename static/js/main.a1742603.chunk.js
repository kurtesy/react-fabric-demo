(this["webpackJsonpreact-fabric-js"]=this["webpackJsonpreact-fabric-js"]||[]).push([[0],{107:function(e,t,a){e.exports={loader:"spinner_loader__ra5Qt",loaderDiv:"spinner_loaderDiv__CGRU1",loaderPosition:"spinner_loaderPosition__39-tc"}},17:function(e,t,a){e.exports={boxTitle:"panel_boxTitle__3jo6l",box:"panel_box__3GlYz",settings:"panel_settings__3gxfa",scrollbar:"panel_scrollbar__15-3B","style-1":"panel_style-1__3RdMI","fa-lg":"panel_fa-lg__3vkO0",fa:"panel_fa__2Xt0s",mainMenu:"panel_mainMenu__2ZkIY",expanded:"panel_expanded__1ziSv","nav-icon":"panel_nav-icon__13207",navText:"panel_navText__yrjU2","no-touch":"panel_no-touch__2Lbbm",scrollable:"panel_scrollable__ujd_z",hover:"panel_hover__24JoD",li:"panel_li__r6zEt",darkerli:"panel_darkerli__3QA_7",darkerlishadow:"panel_darkerlishadow__1NSkN",darkerlishadowdown:"panel_darkerlishadowdown__3EfHO",active:"panel_active__1OA5b","dropdown-menu":"panel_dropdown-menu__Z4T39","dashboard-page":"panel_dashboard-page__13Z1o","dashboard-menu":"panel_dashboard-menu__130En",area:"panel_area__Zkf20"}},18:function(e,t,a){e.exports={btn:"button_btn__p5kIX",brush:"button_brush__1xceI",panelBtn:"button_panelBtn__1haUV"}},250:function(e,t,a){e.exports=a(484)},259:function(e,t){},260:function(e,t){},261:function(e,t){},262:function(e,t){},264:function(e,t){},265:function(e,t){},266:function(e,t){},267:function(e,t){},484:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),o=(a(255),a(21)),s=a(26),i=a(28),c=a(27),u=a(63),d=a.n(u),p=a(51),h=a(24),m=a(18),f=a.n(m),g=a(17),v=a.n(g),b=a(87),k=a.n(b),C=a(35),E=window.fabric,w={top:100,left:100,fontSize:18,width:100,fontFamily:"Times New Roman",selectable:!0},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return console.log("textID",e),new E.Textbox("Your text goes here",Object(C.a)(Object(C.a)({},w),{},{id:e,top:w.top+200+e,left:w.left+200+e}))},y=window.fabric,O={top:100,left:150,width:50,height:50,fill:"rgba(0,0,0,0)",stroke:"black",strokeWidth:1,selectable:!0},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return console.log("textID",e),new y.Rect(Object(C.a)(Object(C.a)({},O),{},{id:e,top:O.top+200+e,left:O.left+200+e}))},S=window.fabric,B={top:100,left:100,radius:20,fill:"rgba(0,0,0,0)",stroke:"black",strokeWidth:1,selectable:!0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return console.log("textID",e),new S.Circle(Object(C.a)(Object(C.a)({},B),{},{id:e,top:B.top+200+e,left:B.left+200+e}))},x=window.fabric,N={fill:"red",stroke:"red",strokeWidth:2,selectable:!0},I=function e(t){var a=this;Object(o.a)(this,e),this.makeLine=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[250,125,250,175];console.log("textID",e);x.Line(n,Object(C.a)(Object(C.a)({},N),{},{id:e},t)),a.theCanvas;a.theCanvas.on("mouse:down",(function(e,t,a){t.isDrawing=!0;var n=t.getPointer(e.e),r=[n.x,n.y,n.x,n.y];a=new x.Line(r,{strokeWidth:3,stroke:"black"}),t.add(a)})),a.theCanvas.on("mouse:move",(function(e,t,a){if(t.isDrawing){var n=t.getPointer(e.e);a.set({x2:n.x,y2:n.y}),t.renderAll()}})),a.theCanvas.on("mouse:up",(function(e,t){t.isDrawing=!1}))},this.theCanvas=t},z=a(244),A=window.fabric,D=A.util.createClass(A.Group,{original:null,erasedPath:null,initialize:function(e,t,a,n){this.original=e,this.erasedPath=t,this.callSuper("initialize",[this.original,this.erasedPath],a,n)},_calcBounds:function(e){var t=[],a=[],n=["tr","br","bl","tl"],r=n.length,l=this.original;l.setCoords(!0);for(var o=0;o<r;o++){var s=n[o];t.push(l.oCoords[s].x),a.push(l.oCoords[s].y)}this._getBounds(t,a,e)}}),L=(A.util.createClass(A.PencilBrush,{_finalizeAndAddPath:function(){var e=this;this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var a=this.createPath(t);a.globalCompositeOperation="destination-out",a.selectable=!1,a.evented=!1,a.absolutePositioned=!0;var n=this.canvas.getObjects().filter((function(e){return!!e.intersectsWithObject(a)}));if(n.length>0){var r=new A.Group(n),l=new D(r,a),o=l.left,s=l.top,i=l.toDataURL({withoutTransform:!0});A.Image.fromURL(i,(function(t){var a;t.set({left:o,top:s}),(a=e.canvas).remove.apply(a,Object(z.a)(n)),e.canvas.add(t)}))}this.canvas.clearContext(this.canvas.contextTop),this.canvas.renderAll(),this._resetShadow()}else this.canvas.requestRenderAll()}}),a(158)),T=a.n(L),P=a(234),R=a(519),M=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1},e.toBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},e.fileToBase64=function(){var t=Object(P.a)(T.a.mark((function t(a){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.toBase64(a);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){console.log("selectorFiles",t),e.props.setLoading(!0),e.file=t[0],e.fileToBase64(e.file).then((function(t){e.props.selectImage(t),e.props.setLoading(!1)})).catch((function(e){console.log("File Reader error",e)}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(R.a,{variant:this.props.useButton?"contained":"text",component:"label",size:"small",className:f.a.panelBtn,color:this.props.useButton?"primary":"default"},"Upload an image",r.a.createElement("input",{type:"file",onChange:function(t){return e.handleChange(t.target.files)},accept:this.props.fileType,multiple:!1,style:{display:"none"}})))}}]),a}(n.Component);M.defaultProps={selectImage:function(){},fileType:"image/*",useButton:!0};var Y=M,J=a(239),X=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={status:"Pending..."},e.client=new J.w3cwebsocket("wss://echo.websocket.org/"),e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.client.onopen=function(){console.log("WebSocket Client Connected"),e.setState({status:"connected"})},this.client.onmessage=function(t){console.log(t),e.setState({status:"Message:"+t+" sent"})},this.props.setClient(this.client)}},{key:"render",value:function(){return r.a.createElement("div",null,"Connection status:",this.state.status)}}]),a}(n.Component),W=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={wsConnect:!1,client:null},e.canvasToJson=function(t){t.preventDefault();var a=JSON.stringify(e.props.canvas.toJSON());navigator.clipboard.writeText(a).then((function(e){alert("JSON Copied to clipboard")})),console.log(a)},e.clear=function(t){t.preventDefault(),e.props.canvas.clear(),e.props.canvas.backgroundImage=null,e.props.canvas.backgroundColor="#ffffff",e.props.canvas.renderAll()},e.setLoading=function(t){e.setState({isLoading:t})},e.connectToWS=function(t){t.preventDefault(),e.setState({wsConnect:!0})},e.setClient=function(t){e.setState({client:t}),console.log(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(Y,{selectImage:this.props.selectImage,setLoading:this.props.setLoading}),r.a.createElement(R.a,{className:f.a.panelBtn,size:"small",variant:"contained",color:"default",onClick:function(t){return e.props.updateImage}},"Resize Image"),r.a.createElement("br",null),r.a.createElement(R.a,{className:f.a.panelBtn,size:"small",variant:"contained",color:"default",onClick:function(t){return e.canvasToJson(t)}},"To JSON"),r.a.createElement("br",null),r.a.createElement(R.a,{variant:"contained",color:"default",size:"small",className:f.a.panelBtn,onClick:function(t){return e.clear(t)}},"Clear Canvas"),r.a.createElement("br",null),r.a.createElement(R.a,{variant:"contained",color:"default",size:"small",className:f.a.panelBtn,onClick:function(t){return e.connectToWS(t)}},"Connect to WS"),this.state.wsConnect&&r.a.createElement(X,{setClient:this.setClient}))}}]),a}(n.Component);W.defaultProps={selectImage:function(){},setLoading:function(){},canvas:null};var U=W||null,F=a(240),V=a.n(F),G=window.fabric,H=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).selectPicture=function(t){var a=V()(e.props,["scale"]);G.Image.fromURL(t,(function(t){t.scale(e.props.scale),t.selectable=!0,e.props.canvas.add(t)}),a)},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(Y,{selectImage:this.selectPicture,setLoading:this.props.setLoading,useButton:!1})}}]),a}(r.a.Component);H.defaultProps={scale:.5};var Z=H,K=window.fabric,q=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={brushsize:10,canDraw:!1,brushcolor:"#ff0000",backgroundImg:null,addTextBox:!1,eraserActive:!1,selectedOption:"select"},e.componentMap={textBox:_,rect:Q,circle:j},e.counter=1,e.resetBrush=function(){e.state.eraserActive&&(console.log("resetBrush"),e.props.canvas.freeDrawingBrush=new K.PencilBrush,e.props.canvas.freeDrawingBrush.width=e.state.brushsize,e.props.canvas.isDrawingMode=!1,e.props.canvas.freeDrawingBrush.color=e.state.brushcolor,e.setState({eraserActive:!1}))},e.brushSizeChange=function(t,a){t.preventDefault(),console.log("brushSizeChange"),e.setState({brushsize:a},function(){this.props.onChange(this.state)}.bind(Object(p.a)(e)))},e.enableSelection=function(t){t.preventDefault(),e.setState({canDraw:!1,selectedOption:"select"},function(){this.props.onChange(this.state)}.bind(Object(p.a)(e)))},e.canUseBrush=function(t){var a=document.getElementById("color").value;e.setState({canDraw:!0,selectedOption:"pencil",brushcolor:e.state.eraserActive?a:e.state.brushcolor},function(){this.props.onChange(this.state)}.bind(Object(p.a)(e)))},e.brushColorChange=function(t){console.log("brushColorChange"),e.setState({brushcolor:t.target.value},function(){this.props.onChange(this.state)}.bind(Object(p.a)(e)))},e.eraser=function(t){t.preventDefault(),console.log("eraser"),e.setState({brushcolor:"white",canDraw:!0,eraserActive:!0,selectedOption:"erase"},function(){this.props.onChange(this.state)}.bind(Object(p.a)(e)))},e.undoRedo=function(t){t.preventDefault(),e.props.canvas.remove(e.props.canvas.getObjects().slice(-1).pop())},e.deleteObj=function(t){t.preventDefault(),e.props.canvas.remove(e.props.canvas.getActiveObject())},e.selectImage=function(t){var a=t;e.props.addBackgroundImg(a),e.setState({backgroundImg:a})},e.readPDF=function(e){k.a.disableWorker=!0,k.a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(k.a.version,"/pdf.worker.js");return k.a.getDocument({url:"https://cors-anywhere.herokuapp.com/https://gahp.net/wp-content/uploads/2017/09/sample.pdf"}).then((function(t){return t.getPage(e).then((function(e){var t=e.getViewport(1.5),a=document.getElementById("the-canvas"),n=a.getContext("2d");return a.height=t.height,a.width=t.width,e.render({canvasContext:n,viewport:t}).promise.then((function(){return a.toDataURL("image/jpeg")}))}))}))},e.addElement=function(t,a){t.preventDefault();var n=e.componentMap[a](e.counter,{stroke:e.state.brushcolor});console.log("addElement",e.props.canvas),e.props.canvas.add(n),e.props.canvas.setActiveObject(n),e.props.canvas.isDrawingMode=!1,e.props.canvas.renderAll(),e.counter++,e.props.updateCanvas(e.props.canvas)},e.drawLine=function(t,a){t.preventDefault(),new I(e.props.canvas).makeLine(e.counter,{stroke:e.state.brushcolor}),e.counter++},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("CPPP",this.props.canvas)}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:v.a.mainMenu},r.a.createElement("div",{className:v.a.settings},"Canvas Tools"),r.a.createElement("div",{className:v.a.scrollbar,id:"style-1"},r.a.createElement("ul",null,r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:this.enableSelection},r.a.createElement("button",{title:"Select",className:f.a.btn,id:"select"}," ",r.a.createElement(h.f,null)),r.a.createElement("span",{className:v.a.navText},"Select"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:this.canUseBrush},r.a.createElement("button",{title:"Pencil Tool",className:f.a.btn,id:"canDraw"}," ",r.a.createElement(h.i,null)),r.a.createElement("span",{className:v.a.navText},"Pencil"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:this.eraser},r.a.createElement("button",{title:"Eraser",className:f.a.btn,id:"erase"}," ",r.a.createElement(h.c,null)),r.a.createElement("span",{className:v.a.navText},"Eraser"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:function(t){e.addElement(t,"textBox")}},r.a.createElement("button",{title:"Text Box",className:f.a.btn,id:"textBox"},r.a.createElement(h.e,null)),r.a.createElement("span",{className:v.a.navText},"Text Box"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",null,r.a.createElement("button",{title:"pic",className:f.a.btn,id:"pic"},r.a.createElement(h.d,null)),r.a.createElement("span",{className:v.a.navText},"Add Picture",r.a.createElement(Z,{canvas:this.props.canvas,setLoading:this.props.setLoading})))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:function(t){e.addElement(t,"rect")}},r.a.createElement("button",{title:"Rectangle",className:f.a.btn,id:"rect"},r.a.createElement(h.k,null)),r.a.createElement("span",{className:v.a.navText},"Add Rectangle"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:function(t){e.addElement(t,"circle")}},r.a.createElement("button",{title:"Circle",className:f.a.btn,id:"circle"},r.a.createElement(h.b,null)),r.a.createElement("span",{className:v.a.navText},"Add Circle"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:function(t){e.deleteObj(t)}},r.a.createElement("button",{title:"Delete",className:f.a.btn,id:"del"},r.a.createElement(h.j,null)),r.a.createElement("span",{className:v.a.navText},"Delete Selection"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",{onClick:function(t){e.undoRedo(t)}},r.a.createElement("button",{title:"Undo",className:f.a.btn,id:"undo"},r.a.createElement(h.l,null)),r.a.createElement("span",{className:v.a.navText},"Undo"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",null,r.a.createElement(h.h,{className:f.a.btn}),r.a.createElement("span",{className:v.a.navText},r.a.createElement("input",{title:"Color Selector",id:"color",type:"color",defaultValue:"#ff0000",onChange:this.brushColorChange}),"Color Selector"))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",null,r.a.createElement(h.g,{className:f.a.btn}),r.a.createElement("span",{className:v.a.navText},r.a.createElement("button",{title:"brushSize1",id:"brushSize1",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,2)}},r.a.createElement(h.b,{style:{fontSize:2}})),r.a.createElement("button",{title:"brushSize2",id:"brushSize2",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,5)}},r.a.createElement(h.b,{style:{fontSize:5}})),r.a.createElement("button",{title:"brushSize3",id:"brushSize3",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,10)}},r.a.createElement(h.b,{style:{fontSize:10}})),r.a.createElement("button",{title:"brushSize4",id:"brushSize4",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,15)}},r.a.createElement(h.b,{style:{fontSize:15}})),r.a.createElement("button",{title:"brushSize5",id:"brushSize5",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,20)}},r.a.createElement(h.b,{style:{fontSize:20}})),r.a.createElement("button",{title:"brushSize6",id:"brushSize6",className:f.a.brush,onClick:function(t){return e.brushSizeChange(t,25)}},r.a.createElement(h.b,{style:{fontSize:25}}))))),r.a.createElement("li",{className:v.a.darkerli},r.a.createElement("a",null,r.a.createElement(h.a,{className:f.a.btn}),r.a.createElement("span",{className:v.a.navText},r.a.createElement(U,{selectImage:this.selectImage,setLoading:this.props.setLoading,canvas:this.props.canvas})))))))}}]),a}(n.Component);q.defaultProps={onChange:function(){},showFigures:function(){},setLoading:function(){}};var $=q,ee=a(23),te=a(243),ae=a.n(te),ne=a(74),re=a.n(ne),le=a(517),oe=a(522),se=a(523),ie=a(520),ce=a(518),ue=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={size:"os",open:e.props.open,position:"center"},e.handleSizeChange=function(t){e.setState({size:t.target.value})},e.handlePositionChange=function(t){e.setState({position:t.target.value})},e.handleClose=function(){e.setState({open:!1}),e.props.onClose(e.state.size,e.state.position)},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(re.a,null,r.a.createElement(ee.b,{onClose:this.handleClose,"aria-labelledby":"simple-dialog-title",open:this.state.open,style:{zIndex:1}},r.a.createElement(oe.a,null,r.a.createElement(oe.a,null,"Select the size & position of background Image uploaded"),r.a.createElement("form",{noValidate:!0,style:{display:"flex",flexDirection:"column",margin:"auto",width:"fit-content"}},r.a.createElement(se.a,{style:{minWidth:120}},r.a.createElement(ie.a,{htmlFor:"sizeOptions"},"Background resize"),r.a.createElement(ce.a,{value:this.state.size,onChange:this.handleSizeChange,inputProps:{name:"sizeOptions",id:"sizeOptions"}},r.a.createElement(ee.d,{value:"os"},"Original Size"),r.a.createElement(ee.d,{value:"s"},"Stretched"),r.a.createElement(ee.d,{value:"sh"},"Stretch Height"),r.a.createElement(ee.d,{value:"sw"},"Stretch Width")),r.a.createElement(ie.a,{htmlFor:"position"},"Position"),r.a.createElement(ce.a,{value:this.state.position,onChange:this.handlePositionChange,inputProps:{name:"position",id:"position"}},r.a.createElement(ee.d,{value:"center"},"Center"),r.a.createElement(ee.d,{value:"topLeft"},"Top Left"),r.a.createElement(ee.d,{value:"topCenter"},"Top Center"),r.a.createElement(ee.d,{value:"topRight"},"Top Right"),r.a.createElement(ee.d,{value:"leftCenter"},"Left Center"),r.a.createElement(ee.d,{value:"rightCenter"},"Right Center"),r.a.createElement(ee.d,{value:"bottomLeft"},"Bottom Left"),r.a.createElement(ee.d,{value:"bottomCenter"},"Bottom Center"),r.a.createElement(ee.d,{value:"bottomRight"},"Bottom Right"))))),r.a.createElement(le.a,null,r.a.createElement(R.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"OK"),r.a.createElement(R.a,{onClick:this.handleClose,color:"primary"},"Close"))))}}]),a}(r.a.Component);ue.defaultProps={selectedValue:"",open:!1};var de=ue,pe=function(e,t,a,n){var r=e.width,l=e.height,o=t.width,s=t.height;return"s"===a?e.setBackgroundImage(t,e.renderAll.bind(e),{scaleX:r/o,scaleY:l/s}):"sh"===a?"topLeft"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{scaleY:l/s}):"topCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:0,left:r/2-o/2,scaleY:l/s}):"topRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:r,scaleY:l/s}):"center"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:r/2-o/2,scaleY:l/s}):"leftCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{scaleY:l/s}):"rightCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:r-o,scaleY:l/s}):"bottomLeft"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:0,scaleY:l/s}):"bottomCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:r/2-o/2,scaleY:l/s}):"bottomRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{left:r-o,scaleY:l/s}):e.setBackgroundImage(t,e.renderAll.bind(e)):"sw"===a?"topLeft"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{scaleX:r/o}):"topCenter"===n||"topRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:0,scaleX:r/o}):"center"===n||"leftCenter"===n||"rightCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l/2-s/2,scaleX:r/o}):"bottomLeft"===n||"bottomCenter"===n||"bottomRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l-s,scaleX:r/o}):e.setBackgroundImage(t,e.renderAll.bind(e)):"os"===a?"topLeft"===n?e.setBackgroundImage(t,e.renderAll.bind(e)):"topCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:0,left:r/2-o/2}):"topRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:0,left:r}):"center"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l/2-s/2,left:r/2-o/2}):"leftCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l/2-s/2}):"rightCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l/2-s/2,left:r-o}):"bottomLeft"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l-s,left:0}):"bottomCenter"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l-s,left:r/2-o/2}):"bottomRight"===n?e.setBackgroundImage(t,e.renderAll.bind(e),{top:l-s,left:r-o}):e.setBackgroundImage(t,e.renderAll.bind(e)):void 0},he=a(107),me=a.n(he),fe=a(241),ge=a.n(fe),ve=window.fabric;ve.Object.prototype.selectable=!1;var be=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).canvas=new ve.Canvas(e.c),e.state={mousecursor:null,backgroundImg:null,canvas:e.canvas,setSizeBackgroundImg:!1,isLoading:!1},e.updateCanvas=function(t){e.canvas=t,e.canvas.renderAll(),e.setState({canvas:t}),console.log("newCanvas",t),console.log(" this.canvas",e.canvas)},e.onControlChange=function(t){e.canvas.freeDrawingBrush.width=t.brushsize,e.canvas.isDrawingMode=t.canDraw,e.canvas.freeDrawingBrush.color=t.brushcolor,e.canvas.renderAll(),console.log("onControlChange",e.canvas.getObjects())},e.addBackgroundImg=function(t){console.log(t),e.setState({backgroundImg:t,setSizeBackgroundImg:!0})},e.backgroundImgResize=function(t,a){var n=e.canvas;ve.Image.fromURL(e.state.backgroundImg,(function(e){n=pe(n,e,t,a)})),e.canvas=n,e.setState({setSizeBackgroundImg:!1})},e.canvasToJson=function(t){t.preventDefault();var a=JSON.stringify(e.canvas.toJSON());navigator.clipboard.writeText(a).then((function(e){alert("JSON Copied to clipboard")})),console.log(a)},e.setLoading=function(t){e.setState({isLoading:t})},e.clear=function(t){t.preventDefault(),e.canvas.clear(),e.canvas.backgroundImage=null,e.canvas.backgroundColor="#ffffff",e.canvas.renderAll()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.canvas=new ve.Canvas(this.c),console.log("screen.height",window.innerWidth,window.innerHeight),this.canvas.setWidth(window.innerWidth-140),this.canvas.setHeight(window.innerHeight-50),this.canvas.calcOffset(),this.canvas.backgroundColor="#ffffff",this.canvas.freeDrawingBrush.width=10,this.canvas.isDrawingMode=!1,this.canvas.freeDrawingBrush.color="#ff0000",this.canvas.renderAll(),this.setState({canvas:this.canvas})}},{key:"render",value:function(){var e=this,t=r.a.Children.map(this.state.children,(function(t){return r.a.cloneElement(t,{canvas:e.canvas,updateCanvas:e.updateCanvas})})),a=this.props,l=a.width,o=a.height;return r.a.createElement(n.Fragment,null,r.a.createElement(re.a,null,r.a.createElement(ee.a,{position:"static",className:d.a.topNav,showMenuIconButton:!1},r.a.createElement("div",{className:d.a.title},"The AlteVision Canvas App"),r.a.createElement(ee.e,null,r.a.createElement(ee.c,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:{}},r.a.createElement(ae.a,null))))),r.a.createElement("div",{className:d.a.wrapper},r.a.createElement("canvas",{ref:function(t){return e.c=t},width:l,height:o,className:d.a.canvasStyle}),this.canvas&&t),this.state.setSizeBackgroundImg&&r.a.createElement(de,{onClose:this.backgroundImgResize,selectedValue:"osc",open:this.state.setSizeBackgroundImg}),this.state.isLoading&&r.a.createElement("div",{className:me.a.loaderDiv},r.a.createElement("div",{className:me.a.loaderPosition},r.a.createElement(ge.a,{style:me.a.loader,size:60,color:"#2fffa8",loading:this.state.loading}),"Loading...")),r.a.createElement($,{canvas:this.state.canvas,onChange:this.onControlChange,updateCanvas:this.updateCanvas,addBackgroundImg:this.addBackgroundImg,setLoading:this.setLoading}))}}]),a}(r.a.Component);be.defaultProps={width:1200,height:800};var ke=be,Ce={objects:[{type:"rect",originX:"left",originY:"top",left:0,top:0,width:100,height:100,fill:"blue",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,rx:0,ry:0},{type:"circle",originX:"left",originY:"top",left:0,top:200,width:40,height:40,fill:"red",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,radius:20,startAngle:0,endAngle:6.283185307179586},{type:"path",originX:"center",originY:"center",left:187.94,top:118.23,width:98.29,height:68.31,fill:null,stroke:"#ff0000",strokeWidth:10,strokeDashArray:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,path:[["M",138.79353648729156,152.38180373184392],["Q",138.79353648729156,152.38180373184392,139.29353648729156,152.38180373184392],["Q",139.79353648729156,152.38180373184392,139.54353648729156,151.8938761474766],["Q",139.29353648729156,151.40594856310923,149.66522711912654,139.2077589539258],["Q",160.03691775096155,127.00956934474239,168.92693829253437,121.15443833233434],["Q",177.81695883410723,115.2993073199263,187.20086940576743,109.44417630751826],["Q",196.58477997742767,103.58904529511021,204.98091048891314,99.19769703580418],["Q",213.3770410003986,94.80634877649815,217.82205127118505,92.36671085466148],["Q",222.26706154197146,89.92707293282479,225.23040172249574,87.97536259535543],["Q",228.19374190302003,86.02365225788608,231.1570820835443,85.53572467351876],["Q",234.1204222640686,85.04779708915142,235.60209235433075,84.55986950478407],["L",237.08376244459288,84.07194192041673]],pathOffset:{x:187.9386494659422,y:118.22687282613032}},{type:"path",originX:"center",originY:"center",left:232.39,top:154.82,width:13.34,height:118.08,fill:null,stroke:"#ff0000",strokeWidth:10,strokeDashArray:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,path:[["M",225.71818178267048,95.78220394523282],["Q",225.71818178267048,95.78220394523282,226.21818178267048,95.78220394523282],["Q",226.71818178267048,95.78220394523282,226.46818178267048,96.27013152960016],["Q",226.21818178267048,96.7580591139675,226.21818178267048,98.70976945143684],["Q",226.21818178267048,100.66147978890619,226.71207181275787,109.93210389188559],["Q",227.20596184284526,119.202727994865,228.19374190302,127.49749692910973],["Q",229.18152196319477,135.79226586335446,230.6631920534569,145.5508175507012],["Q",232.14486214371905,155.30936923804794,232.14486214371905,161.6524278348233],["Q",232.14486214371905,167.9954864315987,232.63875217380644,171.8989071065374],["Q",233.13264220389382,175.8023277814761,234.12042226406857,177.2661105345781],["Q",235.10820232424334,178.7298932876801,236.0959823844181,183.12124154698614],["Q",237.08376244459288,187.5125898062922,237.57765247468024,190.44015531249622],["Q",238.07154250476762,193.36772081870023,238.07154250476762,197.27114149363894],["Q",238.07154250476762,201.1745621685776,238.07154250476762,202.1504173373123],["Q",238.07154250476762,203.12627250604697,238.07154250476762,203.61420009041433],["Q",238.07154250476762,204.10212767478166,238.07154250476762,205.07798284351634],["Q",238.07154250476762,206.053838012251,238.07154250476762,206.54176559661835],["Q",238.07154250476762,207.02969318098567,238.565432534855,210.44518627155702],["L",239.0593225649424,213.8606793621284]],pathOffset:{x:232.38875217380644,y:154.8214416536806}},{type:"path",originX:"center",originY:"center",left:259.06,top:219.72,width:216.82,height:17.57,fill:null,stroke:"#ff0000",strokeWidth:10,strokeDashArray:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,path:[["M",150.6468972093887,228.4985068931485],["Q",150.6468972093887,228.4985068931485,151.1468972093887,228.4985068931485],["Q",151.6468972093887,228.4985068931485,155.8419074801751,228.4985068931485],["Q",160.03691775096155,228.4985068931485,167.44526820227225,227.52265172441383],["Q",174.85361865358294,226.54679655567915,185.7191993155053,224.59508621820981],["Q",196.58477997742767,222.64337588074045,212.88315097031122,220.69166554327109],["Q",229.18152196319477,218.73995520580175,249.43101319677737,215.81238969959773],["Q",269.68050443036,212.8848241933937,289.43610563385516,212.39689660902638],["Q",309.1917068373504,211.90896902465903,325.490077830234,211.42104144029167],["Q",341.7884488231175,210.93311385592435,352.65402948503987,210.93311385592435],["Q",363.51961014696224,210.93311385592435,365.4951702673118,210.93311385592435],["L",367.47073038766126,210.93311385592435]],pathOffset:{x:259.05881379852497,y:219.71581037453643}},{type:"path",originX:"center",originY:"center",left:443.28,top:155.23,width:140.76,height:157.92,fill:null,stroke:"#ff0000",strokeWidth:10,strokeDashArray:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,scaleX:1,scaleY:1,angle:0,flipX:!1,flipY:!1,opacity:1,shadow:null,visible:!0,clipTo:null,backgroundColor:"",fillRule:"nonzero",globalCompositeOperation:"source-over",transformMatrix:null,path:[["M",372.89741074870983,101.63733495764087],["Q",372.89741074870983,101.63733495764087,373.39741074870983,101.63733495764087],["Q",373.89741074870983,101.63733495764087,373.64741074870983,101.14940737327353],["Q",373.39741074870983,100.66147978890619,373.39741074870983,100.17355220453885],["Q",373.39741074870983,99.68562462017152,374.87908083897196,96.7580591139675],["Q",376.3607509292341,93.83049360776347,377.8424210194962,91.87878327029412],["Q",379.3240911097584,89.92707293282479,381.7935412601953,87.97536259535543],["Q",384.2629914106322,86.02365225788608,385.7446615008943,84.55986950478407],["Q",387.22633159115645,83.09608675168207,388.2141116513312,81.63230399858006],["Q",389.201891711506,80.16852124547803,392.1652318920303,79.19266607674336],["Q",395.12857207255456,78.2168109080087,399.57358234334095,78.2168109080087],["Q",404.0185926141274,78.2168109080087,407.9697128548264,77.24095573927403],["Q",411.9208330955255,76.26510057053935,415.8719533362246,76.26510057053935],["Q",419.8230735769236,76.26510057053935,424.7619738777974,76.26510057053935],["Q",429.7008741786712,76.26510057053935,432.1703243291081,76.26510057053935],["Q",434.639774479545,76.26510057053935,437.6031146600693,77.72888332364136],["Q",440.56645484059356,79.19266607674336,442.5420149609431,79.19266607674336],["Q",444.5175750812926,79.19266607674336,447.4809152618169,79.19266607674336],["Q",450.44425544234116,79.19266607674336,452.91370559277806,80.16852124547805],["Q",455.38315574321496,81.14437641421272,457.3587158635645,82.12023158294738],["Q",459.334275983914,83.09608675168207,461.3098361042635,86.02365225788608],["Q",463.28539622461307,88.9512177640901,463.7792862547004,93.83049360776347],["Q",464.2731762847878,98.70976945143684,464.76706631487514,104.07697287947755],["Q",465.26095634496255,109.44417630751826,465.26095634496255,113.34759698245696],["Q",465.26095634496255,117.25101765739565,465.26095634496255,120.66651074796701],["Q",465.26095634496255,124.08200383853837,463.285396224613,127.0095693447424],["Q",461.3098361042635,129.93713485094642,458.8403859538266,132.86470035715044],["Q",456.3709358033897,135.79226586335446,455.38315574321496,138.23190378519115],["Q",454.3953756830402,140.67154170702784,451.9259255326033,143.11117962886453],["Q",449.4564753821664,145.5508175507012,446.4931352016421,148.47838305690522],["Q",443.5297950211178,151.40594856310923,441.5542349007683,153.84558648494593],["Q",439.5786747804188,156.28522440678262,437.6031146600693,158.23693474425198],["Q",435.62755453971977,160.18864508172132,434.14588444945764,163.60413817229266],["Q",432.66421435919546,167.01963126286404,430.19476420875856,171.89890710653742],["Q",427.72531405832166,176.77818295021078,425.7497539379722,181.65745879388413],["Q",423.77419381762263,186.53673463755752,421.30474366718573,192.39186564996555],["Q",418.83529351674883,198.2469966623736,416.8597333963993,204.59005525914898],["Q",414.88417327604975,210.93311385592435,413.4025031857876,214.3486069464957],["Q",411.9208330955255,217.76410003706707,410.9330530353507,220.20373795890376],["Q",409.94527297517595,222.64337588074045,409.94527297517595,225.57094138694447],["Q",409.94527297517595,228.4985068931485,409.94527297517595,230.45021723061785],["Q",409.94527297517595,232.4019275680872,409.94527297517595,233.37778273682187],["Q",409.94527297517595,234.35363790555652,409.94527297517595,233.8657103211892],["Q",409.94527297517595,233.37778273682187,413.89639321587504,228.98643447751584],["Q",417.84751345657406,224.5950862182098,421.30474366718573,222.64337588074045],["Q",424.7619738777974,220.6916655432711,431.1825442689333,217.27617245269977],["Q",437.60311466006925,213.8606793621284,442.0481249308557,212.39689660902638],["Q",446.49313520164213,210.93311385592435,453.90148565295283,208.981403518455],["Q",461.3098361042635,207.02969318098567,464.27317628478784,206.54176559661835],["Q",467.2365164653121,206.053838012251,470.69374667592376,206.053838012251],["Q",474.15097688653543,206.053838012251,479.08987718740923,206.54176559661835],["Q",484.028777488283,207.02969318098567,489.9554578493316,209.46933110282237],["Q",495.88213821038016,211.90896902465903,501.3149285413414,212.8848241933937],["Q",506.7477188723025,213.8606793621284,508.723278992652,214.83653453086305],["Q",510.69883911300155,215.81238969959773,511.19272914308897,215.81238969959773],["Q",511.6866191731763,215.81238969959773,512.1805092032637,216.30031728396506],["Q",512.6743992333511,216.7882448683324,513.1682892634385,217.27617245269974],["L",513.6621792935258,217.76410003706707]],pathOffset:{x:443.2797950211178,y:155.2256540994824}}],background:""},Ee=window.fabric,we=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).data={},e.canvas=new Ee.Canvas(e.c),e.renderJsonData=function(){e.canvas.loadFromJSON(e.data,e.canvas.renderAll.bind(e.canvas)),e.canvas.renderAll()},e.readJsonData=function(){var t=document.getElementById("jsonText").value,a={};try{a=JSON.parse(t),console.log("Rendering JSON..."),e.data=t,e.renderJsonData()}catch(n){alert("Invalid json"),console.log(n.stack)}console.log(a)},e.clear=function(t){t.preventDefault(),e.canvas.clear()},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.canvas=new Ee.Canvas(this.c),this.canvas.backgroundColor="#ffffff",this.canvas.renderAll(),document.getElementById("jsonText").value=JSON.stringify(Ce)}},{key:"render",value:function(){var e=this,t=this.props,a=t.width,l=t.height;return r.a.createElement(n.Fragment,null,r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("canvas",{ref:function(t){return e.c=t},width:a,height:l,className:d.a.canvasStyle}),r.a.createElement("br",null),r.a.createElement("textarea",{id:"jsonText",defaultValue:JSON.stringify(this.data),rows:"10",cols:"80"}),r.a.createElement("br",null)),r.a.createElement("td",{className:v.a.rightPanel},r.a.createElement("button",{onClick:this.readJsonData},"Render JSON on Canvas"),r.a.createElement("button",{onClick:this.clear},"Clear Canvas"))))))}}]),a}(r.a.Component);we.defaultProps={width:1200,height:800};var _e=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){console.log("Starting Free Draw");var e=this.props.canvas;e.isDrawingMode=!0,this.props.updatedCanvas(e)}},{key:"render",value:function(){return null}}]),a}(r.a.Component);_e.defaultProps={top:0,left:0,width:50,height:50};var ye=_e,Oe={},Qe=function(){return r.a.createElement("div",{style:Oe},r.a.createElement(ke,null,r.a.createElement(ye,null)))};Object(l.render)(r.a.createElement(Qe,null),document.getElementById("root"))},63:function(e,t,a){e.exports={canvasStyle:"canvas_canvasStyle__1syKw",wrapper:"canvas_wrapper__Xe9Rz",topNav:"canvas_topNav__3gfjH",title:"canvas_title__1TzSf",rightNav:"canvas_rightNav__2Ydhj"}},88:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=88}},[[250,1,2]]]);
//# sourceMappingURL=main.a1742603.chunk.js.map